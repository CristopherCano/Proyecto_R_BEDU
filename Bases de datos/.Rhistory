??as.hour()
Sys.time()
class(Sys.time())
as.POSIXct("22:30:21")
as.POSIXct("2021-02-06 11:15:36")
as.POSIXct("2021-02-06 11:15:36")$hours
library(lubridate)
time <- factor("09:12:89")
a <- hms(as.character(time))
hour(a)
class(hour(a))
class(as.integer(hour(a))
c
class(as.integer(hour(a)))
# Librerías utilizadas
library(dplyr)
library(xts)
library(ggplot2)
# Espacio de trabajo
setwd("Bases de datos")
# Preparación de los datos
data <- read.csv("cdmx_transporte_clean.csv")
data <- mutate(data, pickup_date = as.Date(pickup_date, "%d/%m/%Y"))
data <- filter(data, wait_sec <= 3600)
n <- as.integer(count(data))
unos <- rep(1,n)
data <- select(data,Transporte,pickup_date,pickup_time,wait_sec,municipios_origen,municipios_destino)
data <- cbind(data,unos)
names(data)
uNames = c("UberX","UberBlack","UberXL","UberSUV")
tNames = c("Taxi de Sitio","Taxi Libre","Radio Taxi")
View(data)
View(data)
lmData <- mutate(data, dia_semana = format(pickup_date, "%a"), mes = format(pickup_date,"%b"), hora = as.integer(hour(hms(as.character(factor(pickup_time))))) )
View(lmData)
View(lmData)
12%4
12/4
as.integer(11/4)
12%%4
12%%12
tmp <- c(1,1,1,1,2,2,2,2,3,3,3,3)
tmp[1]
lmData <- mutate(lmData, rango_tiempo = tmp[hora])
View(lmData)
View(lmData)
as.character(1)
lmData <- mutate(lmData, rango_tiempo = as.character(tmp[hora]))
View(lmData)
View(lmData)
names(lmData)
View(lmData)
View(lmData)
lmData <- select(Transporte,municipios_origen,municipios_destino,dia_semana,mes,rango_tiempo)
lmData <- select(lmData,Transporte,municipios_origen,municipios_destino,dia_semana,mes,rango_tiempo)
lmData <- lmData::dummy_cols(lmData)
lmData <- fastDummies::dummy_cols(lmData)
??dummy_cols
?fastDummies
??fastDummies
install.packages("fastDummies")
lmData <- fastDummies::dummy_cols(lmData)
fun <- function(x)
{
if (x %in% uNames)
{
y <- "Uber"
}
else
{
y <- x
}
y
}
fun("Taxi")
fun("UberX")
lmData <- mutate(data, dia_semana = format(pickup_date, "%a"), mes = format(pickup_date,"%b"), hora = as.integer(hour(hms(as.character(factor(pickup_time))))) )
lmData <- mutate(lmData, rango_tiempo = as.character(tmp[hora]))
lmData <- select(lmData,Transporte,municipios_origen,municipios_destino,dia_semana,mes,rango_tiempo)
lmData <- mutate(lmData, Transporte = fun(Transporte))
